var dbx;
function dbxManager(a){dbx=this;if(/^[-_a-z0-9]+$/i.test(a)){if(this.supported=!(0==document.getElementsByTagName("*").length||"KDE"==navigator.vendor&&"undefined"==typeof window.sidebar))this.etype="undefined"!=typeof document.addEventListener?"addEventListener":"undefined"!=typeof document.attachEvent?"attachEvent":"none",this.eprefix="attachEvent"==this.etype?"on":"","undefined"!=typeof window.opera&&7.5>parseFloat(navigator.userAgent.toLowerCase().split(/opera[\/ ]/)[1].split(" ")[0],10)&&(this.etype=
"none"),"none"==this.etype?this.supported=!1:(this.running=0,this.sid=a,this.savedata={},this.cookiestate=this.getCookieState())}else alert('Error from dbxManager:\n"'+a+'" is an invalid session ID')}
dbxManager.prototype.setCookieState=function(){var a=new Date;a.setTime(a.getTime()+31536E6);var b="";for(j in this.savedata)"function"!=typeof this.savedata[j]&&(b+=j+"="+this.savedata[j]+"&");this.state=b.replace(/^(.+)&$/,"$1");this.cookiestring=this.state.replace(/,/g,"|");this.cookiestring=this.cookiestring.replace(/=/g,":");if("undefined"==typeof this.onstatechange||this.onstatechange())document.cookie="dbx-"+this.sid+"="+this.cookiestring+"; expires="+a.toGMTString()+"; path=/"};
dbxManager.prototype.getCookieState=function(){this.cookiestate=null;if(document.cookie&&-1!=document.cookie.indexOf("dbx-"+this.sid)){this.cookie=document.cookie.split("dbx-"+this.sid+"=")[1].split(";")[0].split("&");for(var a in this.cookie)"function"!=typeof this.cookie[a]&&(this.cookie[a]=this.cookie[a].replace(/\|/g,","),this.cookie[a]=this.cookie[a].replace(/:/g,"="),this.cookie[a]=this.cookie[a].split("="),this.cookie[a][1]=this.cookie[a][1].split(","));this.cookiestate={};for(a in this.cookie)"function"!=
typeof this.cookie[a]&&(this.cookiestate[this.cookie[a][0]]=this.cookie[a][1])}return this.cookiestate};dbxManager.prototype.addDataMember=function(a,b){this.savedata[a]=b};dbxManager.prototype.createElement=function(a){return"undefined"!=typeof document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a)};
dbxManager.prototype.getTarget=function(a,b,c){a="undefined"!=typeof c?c:"undefined"!=typeof a.target?a.target:a.srcElement;for(b=new RegExp(b,"");!b.test(a.className);)a=a.parentNode;return a};
function dbxGroup(a,b,c,d,f,e,k,g,m,l,n,p,q,r){if(/^[-_a-z0-9]+$/i.test(a)){if(this.container=document.getElementById(a),null!=this.container&&dbx.supported){var h=this;this.gid=a;this.dragok=!1;this.box=null;this.vertical="vertical"==b;this.threshold=parseInt(c,10);this.restrict="yes"==d;this.resolution=parseInt(f,10);this.toggles="yes"==e;this.defopen="closed"!=k;this.vocab={open:g,close:m,move:l,toggle:n,kmove:p,ktoggle:q,syntax:r};this.container.style.position="relative";this.container.style.display=
"block";"undefined"!=typeof window.opera&&(this.container.style.display="run-in");this.boxes=[];this.buttons=[];this.order=[];this.eles=this.container.getElementsByTagName("*");for(a=0;a<this.eles.length;a++)/dbx\-box/i.test(this.eles[a].className)&&!/dbx\-dummy/i.test(this.eles[a].className)&&(this.eles[a].style.position="relative",this.eles[a].style.display="block",this.boxes.push(this.eles[a]),this.eles[a].className+=" dbx-box-open",this.eles[a].className+=" dbxid"+this.order.length,this.order.push(this.order.length.toString()+
"+"),this.eles[a][dbx.etype](dbx.eprefix+"mousedown",function(a){a||(a=window.event);h.mousedown(a,dbx.getTarget(a,"dbx-box"))},!1)),/dbx\-handle/i.test(this.eles[a].className)&&(this.eles[a].style.position="relative",this.eles[a].style.display="block",this.eles[a].className+=" dbx-handle-cursor",this.eles[a].setAttribute("title",null==this.eles[a].getAttribute("title")||""==this.eles[a].title?this.vocab.move:this.vocab.syntax.replace("%mytitle%",this.eles[a].title).replace("%dbxtitle%",this.vocab.move)),
this.toggles?this.buttons.push(this.addToggleBehavior(this.eles[a])):(this.eles[a][dbx.etype](dbx.eprefix+"key"+("undefined"!=typeof document.uniqueID||"Apple Computer, Inc."==navigator.vendor?"down":"press"),function(a){a||(a=window.event);return h.keypress(a,dbx.getTarget(a,"dbx-handle"))},!1),this.eles[a][dbx.etype](dbx.eprefix+"focus",function(a){a||(a=window.event);h.createTooltip(null,dbx.getTarget(a,"dbx-handle"))},!1),this.eles[a][dbx.etype](dbx.eprefix+"blur",function(){h.removeTooltip()},
!1)));dbx.addDataMember(this.gid,this.order.join(","));b=this.container.appendChild(dbx.createElement("span"));b.className="dbx-box dbx-dummy";b.style.display="block";b.style.width="0";b.style.height="0";b.style.overflow="hidden";this.vertical&&(b.className+=" dbx-offdummy");this.boxes.push(b);if(null!=dbx.cookiestate&&"undefined"!=typeof dbx.cookiestate[this.gid]){if(c=dbx.cookiestate[this.gid].length,c==this.boxes.length-1){for(a=0;a<c;a++)d=parseInt(dbx.cookiestate[this.gid][a],10),this.container.insertBefore(this.boxes[d],
b),this.toggles&&/\-$/.test(dbx.cookiestate[this.gid][a])&&this.toggleBoxState(this.buttons[d],!1);this.getBoxOrder()}}else if(!this.defopen&&this.toggles)for(b=this.buttons.length,a=0;a<b;a++)this.toggleBoxState(this.buttons[a],!0);document[dbx.etype](dbx.eprefix+"mouseout",function(a){"undefined"==typeof a.target&&(a=window.event,a.relatedTarget=a.toElement);null==a.relatedTarget&&h.mouseup(a)},!1);document[dbx.etype](dbx.eprefix+"mousemove",function(a){h.mousemove(a);return!h.dragok},!1);document[dbx.etype](dbx.eprefix+
"mouseup",function(a){h.mouseup(a)},!1);this.keydown=!1;document[dbx.etype](dbx.eprefix+"keydown",function(){h.keydown=!0},!1);document[dbx.etype](dbx.eprefix+"keyup",function(){h.keydown=!1},!1)}}else alert('Error from dbxGroup:\n"'+a+'" is an invalid container ID')}
dbxGroup.prototype.addToggleBehavior=function(a){var b=this;a=a.appendChild(dbx.createElement("a"));a.appendChild(document.createTextNode("\u00a0"));a.style.cursor="pointer";a.href="javascript:void(null)";a.className="dbx-toggle dbx-toggle-open";a.setAttribute("title",this.vocab.toggle.replace("%toggle%",this.vocab.close));a.hasfocus="undefined"!=typeof window.opera||"Apple Computer, Inc."==navigator.vendor?null:!1;this.tooltip=null;a.onclick=function(){if(!0===this.hasfocus||null===this.hasfocus)b.removeTooltip(),
b.toggleBoxState(this,!0)};a["onkey"+("undefined"!=typeof document.uniqueID||"Apple Computer, Inc."==navigator.vendor?"down":"press")]=function(a){a||(a=window.event);return b.keypress(a,this)};a.onfocus=function(){for(var a=b.buttons.length,d=0;d<a;d++)b.buttons[d].className=b.buttons[d].className.replace(/[ ](dbx\-toggle\-hilite\-)(open|closed)/,"");a=/dbx\-toggle\-open/.test(this.className);this.className+=" dbx-toggle-hilite-"+(a?"open":"closed");b.createTooltip(a,this);this.isactive=!0;null!==
this.hasfocus&&(this.hasfocus=!0)};a.onblur=function(){this.className=this.className.replace(/[ ](dbx\-toggle\-hilite\-)(open|closed)/,"");b.removeTooltip();null!==this.hasfocus&&(this.hasfocus=!1)};return a};
dbxGroup.prototype.toggleBoxState=function(a,b){var c=/dbx\-toggle\-open/.test(a.className),d=dbx.getTarget(null,"dbx-box",a);dbx.box=d;dbx.toggle=a;dbx.group="undefined"==typeof dbx.container?dbx.getTarget(null,"dbx-group",d):dbx.container;if(!c&&("undefined"==typeof dbx.onboxopen||dbx.onboxopen())||c&&("undefined"==typeof dbx.onboxclose||dbx.onboxclose()))a.className="dbx-toggle dbx-toggle-"+(c?"closed":"open"),a.title=this.vocab.toggle.replace("%toggle%",c?this.vocab.open:this.vocab.close),"undefined"!=
typeof a.isactive&&(a.className+=" dbx-toggle-hilite-"+(c?"closed":"open")),d.className=d.className.replace(/[ ](dbx-box-)(open|closed)/," $1"+(c?"closed":"open")),b&&this.getBoxOrder()};
dbxGroup.prototype.shiftBoxPosition=function(a,b,c){var d=dbx.getTarget(null,"dbx-box",b);dbx.group=this.container;dbx.box=d;dbx.event=a;if("undefined"==typeof dbx.onboxdrag||dbx.onboxdrag()){a=[];for(var f=this.boxes.length,e=0;e<f;e++)a[e]=[e,this.boxes[e][this.vertical?"offsetTop":"offsetLeft"]],d==this.boxes[e]&&(this.idref=e);a.sort(this.compare);for(e=0;e<f;e++)if(a[e][0]==this.idref&&(c&&e<f-2||!c&&0<e)){a=this.boxes[a[e+(c?1:-1)][0]];if(0<this.resolution)var k={x:d.offsetLeft,y:d.offsetTop},
g={x:a.offsetLeft,y:a.offsetTop};this.container.insertBefore(c?a:d,c?d:a);0<this.resolution?(new dbxAnimator(this,a,g,this.resolution,!0,b),new dbxAnimator(this,d,k,this.resolution,!0,b)):b.focus();break}this.getBoxOrder()}};dbxGroup.prototype.compare=function(a,b){return a[1]-b[1]};
dbxGroup.prototype.createTooltip=function(a,b){if(this.keydown){this.tooltip=this.container.appendChild(dbx.createElement("span"));this.tooltip.style.visibility="hidden";this.tooltip.className="dbx-tooltip";null!=a?this.tooltip.appendChild(document.createTextNode(this.vocab.kmove+this.vocab.ktoggle.replace("%toggle%",a?this.vocab.close:this.vocab.open))):this.tooltip.appendChild(document.createTextNode(this.vocab.kmove));a=dbx.getTarget(null,"dbx-box",b);this.tooltip.style.left=a.offsetLeft+"px";
this.tooltip.style.top=a.offsetTop+"px";var c=this.tooltip;window.setTimeout(function(){null!=c&&(c.style.visibility="visible")},500)}};dbxGroup.prototype.removeTooltip=function(){null!=this.tooltip&&(this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null)};
dbxGroup.prototype.mousedown=function(a,b){var c="undefined"!=typeof a.target?a.target:a.srcElement;"#text"==c.nodeName&&(c=c.parentNode);if(!/dbx\-(toggle|box|group)/i.test(c.className))for(;!/dbx\-(handle|box|group)/i.test(c.className);)c=c.parentNode;/dbx\-handle/i.test(c.className)&&(this.removeTooltip(),this.released=!1,this.initial={x:a.clientX,y:a.clientY},this.current={x:0,y:0},this.createCloneBox(b),"undefined"!=typeof a.preventDefault&&a.preventDefault(),"undefined"!=typeof document.onselectstart&&
(document.onselectstart=function(){return!1}))};
dbxGroup.prototype.mousemove=function(a){if(this.dragok&&null!=this.box){this.positive=this.vertical?a.clientY>this.current.y?!0:!1:a.clientX>this.current.x?!0:!1;this.current={x:a.clientX,y:a.clientY};var b=this.current.x-this.initial.x,c=this.current.y-this.initial.y;(0<=b&&b<=this.threshold||0>=b&&b>=0-this.threshold)&&(0<=c&&c<=this.threshold||0>=c&&c>=0-this.threshold)&&(this.current.x-=b,this.current.y-=c);if(this.released||b>this.threshold||b<0-this.threshold||c>this.threshold||c<0-this.threshold)if(dbx.group=
this.container,dbx.box=this.box,dbx.event=a,"undefined"==typeof dbx.onboxdrag||dbx.onboxdrag()){this.released=!0;this.restrict&&this.vertical||(this.boxclone.style.left=this.current.x-this.difference.x+"px");if(!this.restrict||this.vertical)this.boxclone.style.top=this.current.y-this.difference.y+"px";this.moveOriginalToPosition(this.current.x,this.current.y);"undefined"!=typeof a.preventDefault&&a.preventDefault()}}return!0};
dbxGroup.prototype.mouseup=function(a){null!=this.box&&(this.moveOriginalToPosition(a.clientX,a.clientY),this.removeCloneBox(),this.getBoxOrder(),"undefined"!=typeof document.onselectstart&&(document.onselectstart=function(){return!0}));this.dragok=!1};
dbxGroup.prototype.keypress=function(a,b){if(/^(3[7-9])|(40)$/.test(a.keyCode)&&(this.removeTooltip(),this.vertical&&/^(38|40)$/.test(a.keyCode)||!this.vertical&&/^(37|39)$/.test(a.keyCode))){this.shiftBoxPosition(a,b,/^[3][78]$/.test(a.keyCode)?!1:!0);if("undefined"!=typeof a.preventDefault)a.preventDefault();else return!1;"undefined"!=typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;this.keydown=!1}return!0};
dbxGroup.prototype.getBoxOrder=function(){this.order=[];for(var a=this.eles.length,b=0;b<a;b++)/dbx\-box/i.test(this.eles[b].className)&&!/dbx\-(clone|dummy)/i.test(this.eles[b].className)&&this.order.push(this.eles[b].className.split("dbxid")[1]+(/dbx\-box\-open/i.test(this.eles[b].className)?"+":"-"));dbx.savedata[this.gid]=this.order.join(",");dbx.setCookieState()};
dbxGroup.prototype.createClone=function(a,b,c){var d=this.container.appendChild(a.cloneNode(!0));d.className+=" dbx-clone";d.style.position="absolute";d.style.visibility="hidden";d.style.zIndex=b;d.style.left=c.x+"px";d.style.top=c.y+"px";d.style.width=a.offsetWidth+"px";d.style.height=a.offsetHeight+"px";return d};
dbxGroup.prototype.createCloneBox=function(a){this.box=a;this.position={x:this.box.offsetLeft,y:this.box.offsetTop};this.difference={x:this.initial.x-this.position.x,y:this.initial.y-this.position.y};this.boxclone=this.createClone(this.box,3E4,this.position);this.boxclone.style.cursor="move";this.dragok=!0};dbxGroup.prototype.removeCloneBox=function(){this.container.removeChild(this.boxclone);this.box.style.visibility="visible";this.box=null};
dbxGroup.prototype.moveOriginalToPosition=function(a,b){var c=this.vertical?b-this.difference.y:a-this.difference.x,d=this.vertical?this.boxclone.offsetHeight:this.boxclone.offsetWidth;this.box.style.visibility="hidden";this.boxclone.style.visibility="visible";var f=this.boxes.length;for(a=0;a<f;a++)if(b=this.vertical?this.boxes[a].offsetTop:this.boxes[a].offsetLeft,this.positive&&c+d>b&&c<b||!this.positive&&c<b&&c+d>b){if(this.boxes[a]==this.box)break;for(c=this.box.nextSibling;null==c.className||
!/dbx\-box/.test(c.className);)c=c.nextSibling;if(this.boxes[a]==c)break;if(0<this.resolution){if(this.box[this.vertical?"offsetTop":"offsetLeft"]<b)for(var e=this.boxes[a].previousSibling;null==e.className||!/dbx\-box/.test(e.className);)e=e.previousSibling;else e=this.boxes[a];var k={x:e.offsetLeft,y:e.offsetTop}}b=this.box.offsetLeft;c=this.box.offsetTop;this.container.insertBefore(this.box,this.boxes[a]);this.initial.x+=this.box.offsetLeft-b;this.initial.y+=this.box.offsetTop-c;0<this.resolution&&
e!=this.box&&new dbxAnimator(this,e,k,this.resolution,!1,null);break}};function dbxAnimator(a,b,c,d,f,e){this.caller=a;this.box=b;this.timer=null;a=c[this.caller.vertical?"y":"x"];b=this.box[this.caller.vertical?"offsetTop":"offsetLeft"];a==b||dbx.running>this.caller.boxes.length-1||(c=this.caller.createClone(this.box,29999,c),c.style.visibility="visible",this.box.style.visibility="hidden",this.animateClone(c,a,b>a?b-a:-(a-b),this.caller.vertical?"top":"left",d,f,e))}
dbxAnimator.prototype.animateClone=function(a,b,c,d,f,e,k){var g=this,m=0;dbx.running++;this.timer=window.setInterval(function(){m++;b+=c/f;a.style[d]=b+"px";if(m==f&&(window.clearTimeout(g.timer),g.timer=null,dbx.running--,g.caller.container.removeChild(a),g.box.style.visibility="visible",e))if(null!=k&&"hidden"!=k.parentNode.style.visibility)k.focus();else if(g.caller.toggles){var l=g.caller.buttons[parseInt(g.box.className.split("dbxid")[1],10)];null!=l&&"undefined"!=typeof l.isactive&&l.focus()}},
20)};"undefined"!=typeof window.attachEvent&&window.attachEvent("onunload",function(){for(var a="mousedown mousemove mouseup mouseout click keydown keyup focus blur selectstart statechange boxdrag boxopen boxclose".split(" "),b=a.length,c=document.all.length,d=0;d<c;d++)for(var f=0;f<b;f++)document.all[d]["on"+a[f]]=null});
