/*
 Copyright (c) 2013-Now http://jeesite.com All rights reserved.

 @author ThinkGem
 @version 2019-1-6
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
$("#dataGrid").dataGrid({data:columnList,datatype:"local",rowNum:3E3,sortableColumn:!1,dataId:"aa",autoGridHeight:function(){return $(window).height()-$(".nav-tabs").outerHeight()-$(".box-footer").outerHeight()-95},autoGridWidth:function(){return $(".main-content").width()-25},columnModel:[{header:"\u7f16\u7801",name:"id",frozen:!0,hidden:!0,editable:!0},{header:"\u72b6\u6001",name:"status",frozen:!0,hidden:!0,editable:!0},{header:"&nbsp;",name:"columnSort",width:30,frozen:!0,align:"center",editable:!0,
edittype:"text",editoptions:{maxlength:"8","class":"form-control required digits hide columnSort",dataInit:function(a){""==$(a).val()&&$(a).val(10*$(a).closest("table").find("tr").length);$(a).parent().append('<i class="fa fa-arrows" style="color:#aaa;cursor:move"></i>')}},classes:"columnSort"},{header:"\u5217\u540d",name:"columnName",width:110,frozen:!0,formatter:function(a,b,c,d){return c.status==Global.STATUS_DELETE?'<span title="\u5df2\u88ab\u5220\u9664\u7684\u5217\uff0c\u4fdd\u5b58\u540e\u4e0b\u6b21\u5c06\u4e0d\u53ef\u89c1" style="color:red">'+
c.columnName+' <i class="fa icon-question"></i></span>':c.columnName},classes:""},{header:"\u5217\u540d(\u9690\u85cf)",name:"columnName",frozen:!0,hidden:!0,editable:!0},{header:"\u5217\u8bf4\u660e",name:"comments",width:110,frozen:!0,editable:!0,edittype:"text",editoptions:{maxlength:"100","class":"form-control required"}},{header:"\u5b57\u6bb5\u7c7b\u578b",name:"columnType",hidden:!0,editable:!0},{header:"\u5b57\u6bb5\u7c7b\u578b",name:"columnType",width:110,formatter:function(a,b,c,d){return c.columnType}},
{header:"\u5c5e\u6027\u7c7b\u578b",name:"attrType",width:90,editable:!0,edittype:"select",editoptions:{"class":"form-control required","data-msg-required":"\u8bf7\u9009\u62e9\u5c5e\u6027\u7c7b\u578b",items:config.attrTypeList,itemLabel:"label",itemValue:"value",dataInit:function(a){$(a).select2().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:'\u5c5e\u6027\u540d\u79f0 <i class="fa icon-question" title="\u5b9e\u4f53\u5bf9\u8c61\u7684\u5c5e\u6027\u5b57\u6bb5\u652f\u6301\u590d\u6742\u683c\u5f0f\uff1a\u5bf9\u8c61\u540d.\u5c5e\u6027\u540d|\u5c5e\u6027\u540d2\uff0c\u4f8b\u5982\uff1a\u7528\u6237user.userCode|userName\uff0c\u4e3b\u8981\u7528\u4e8e\u6811\u9009\u62e9\u7ec4\u4ef6\uff1b\u5982\u679c\u5b50\u8868\uff0c\u5219\u5199\u4e3b\u8868\u5b9e\u4f53\u7c7b\u540d + \u4e3b\u952e\uff0c\u4f8b\u5982\uff1aformEntity.entityId"></i>',
name:"fullAttrName",width:100,editable:!0,edittype:"text",editoptions:{maxlength:"100","class":"form-control required","data-msg-required":"\u8bf7\u9009\u62e9\u5c5e\u6027\u540d\u79f0"}},{header:"\u4e3b\u952e",name:"isPk",width:40,align:"center",editable:!0,edittype:"checkbox",editoptions:{"class":"form-control",value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u63d2\u5165",name:"isInsert",width:40,align:"center",editable:!0,edittype:"checkbox",
editoptions:{"class":"form-control",value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u66f4\u65b0",name:"isUpdate",width:40,align:"center",editable:!0,edittype:"checkbox",editoptions:{"class":"form-control",value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u5217\u8868",name:"isList",width:40,align:"center",editable:!0,edittype:"checkbox",editoptions:{"class":"form-control",
value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u67e5\u8be2",name:"isQuery",width:40,align:"center",editable:!0,edittype:"checkbox",editoptions:{"class":"form-control",value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u5339\u914d\u65b9\u5f0f",name:"queryType",width:100,editable:!0,edittype:"select",editoptions:{"class":"form-control required","data-msg-required":"\u8bf7\u9009\u62e9\u5339\u914d\u65b9\u5f0f",
items:config.queryTypeList,itemLabel:"label",itemValue:"value",dataInit:function(a){$(a).select2().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u7f16\u8f91",name:"isEdit",width:40,align:"center",editable:!0,edittype:"checkbox",editoptions:{"class":"form-control",value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u5fc5\u586b",name:"isRequired",width:40,align:"center",editable:!0,edittype:"checkbox",editoptions:{"class":"form-control",
value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u63a7\u4ef6\u7c7b\u578b",name:"showType",width:120,editable:!0,edittype:"select",editoptions:{"class":"form-control required","data-msg-required":"\u8bf7\u9009\u62e9\u63a7\u4ef6\u7c7b\u578b",items:config.showTypeList,itemLabel:"label",itemValue:"value",dataInit:function(a){$(a).select2().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:'\u6805\u683c <i class="fa icon-question" title="\u6805\u683c\u5b9a\u4e49\uff1a\u884c/\u6807\u7b7e/\u8f93\u5165\u6846"></i>',
name:"optionMap['gridRowCol']",width:90,editable:!0,edittype:"select",editoptions:{"class":"form-control",items:config.gridRowColList,itemLabel:"label",itemValue:"value",dataInit:function(a){$(a).select2().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:'<span title="\u5f3a\u5236\u65b0\u884c\u3001\u6362\u884c\uff0c\u5f3a\u5236\u8f93\u51fa\u4e00\u4e2a&lt;div class=&quot;row&quot;&gt;&lt;/div&gt;">\u65b0\u884c</span>',name:"optionMap['isNewLine']",align:"center",width:40,editable:!0,
edittype:"checkbox",editoptions:{"class":"form-control",value:"1",dataInit:function(a){$(a).iCheck().on("change",function(){try{$(this).resetValid()}catch(b){}})}}},{header:"\u5b57\u5178\u7c7b\u578b",name:"optionMap['dictType']",width:120,formatter:function(a,b,c,d){b.colModel.data[b.rowId+"_dictName"]=js.val(c,"optionMap.dictName");return b.colModel.data[b.rowId]},unformat:function(a,b,c){return b.colModel.data[b.rowId]+"|"+b.colModel.data[b.rowId+"_dictName"]},editable:!0,edittype:"custom",editoptions:{custom_element:function(a,
b){return js.template("treeselectTpl",{id:"dict_"+b.id.replace(/['\[\]]/g,"_"),title:"\u5b57\u6bb5\u7c7b\u578b",name:"optionMap['dictType']",value:a.split("|")[0],labelName:"optionMap['dictName']",labelValue:a.split("|")[1],url:ctx+"/sys/dictType/treeData",isReturnValue:"true",cssClass:""})}}},{header:"\u5b57\u6bb5\u9a8c\u8bc1",name:"optionMap['fieldValid']",width:180,editable:!0,edittype:"select",editoptions:{"class":"form-control",multiple:!0,items:config.fieldValidList,itemLabel:"label",itemValue:"value",
dataInit:function(a){$(a).select2().on("change",function(){try{$(this).resetValid()}catch(b){}})}}}],groupHeaders:{twoLevel:[{startColumnName:"id",numberOfColumns:13,titleText:"\u5b57\u6bb5"},{startColumnName:"isList",numberOfColumns:3,titleText:"\u5217\u8868"},{startColumnName:"isEdit",numberOfColumns:7,titleText:"\u8868\u5355"}]},editGrid:!0,editGridInitRowNum:0,editGridInitAllRowEdit:!0,editGridAddRowBtn:$("#dataGridAdd"),editGridAddRowInitData:{id:"",status:Global.STATUS_NORMAL},editGridInputFormListName:"columnList",
editGridInputFormListAttrs:"id,status,columnName,comments,columnType,attrType,fullAttrName,isPk,isRequired,isInsert,isUpdate,columnSort,isList,isQuery,queryType,isEdit,showType,optionMap['isNewLine'],optionMap['gridRowCol'],optionMap['fieldValid'],optionMap['dictType'],optionMap['dictName']",ajaxSuccess:function(a){}});$("#dataGrid").tableDnD({onDragClass:"dragClass",dragHandle:"columnSort",onDrop:function(a,b){$(a).find("input.columnSort").each(function(a){$(this).val(10*(a+1))})}});
$("#inputForm").validate({ignore:":hidden",submitHandler:function(a){if(("step1"==op||"step2"==op)&&$("#tab-1").hasClass("active"))return $("#btnSave").removeClass("hide"),$('[href="#tab-2"]').click(),!1;js.ajaxSubmitForm($(a),function(a){js.showMessage(a.message);a.result==Global.TRUE&&("0"==$("#genFlag").val()?location=ctx+"/gen/genTable/form?tableName="+tableName+"&op=step3":js.closeCurrentTabPage(function(a){a.page()}))},"json")}});
$("#tplCategory").change(function(){$(".options").addClass("hide");var a=$(this).val();""!=a&&$("."+a.split("_")[0]).removeClass("hide")}).change();
